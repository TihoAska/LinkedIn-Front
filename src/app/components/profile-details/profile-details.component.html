<main>
    <section class="my-profile">
        <img class="banner" src="../../../assets/images/profileMisc/timeline.png" alt="" width="804px" height="201px">
        <img class="avatar" [src]="(userService.$loggedUser | async).imageUrl" alt="" height="150px" width="150px">

        <div class="info">
            <div class="name-and-verification">
                <p id="name">{{ (userService.$loggedUser | async).firstName }} {{ (userService.$loggedUser | async).lastName }}</p>
                <button id="verify-now"><mat-icon>verified_user</mat-icon>Verify now</button>
            </div>
            <p id="experience">{{ (userService.$loggedUser | async ).job }} | Experience with Angular and .NET | Computer Science Graduate</p>
            <p id="location">Đakovo, Osijek-Baranja, Croatia</p>
            <a href="">{{ (userService.$loggedUser | async).connections?.length }} connections</a>
            <div class="buttons">
                <button id="open-to">Open to</button>
                <button id="add-profile-section">Add profile section</button>
                <button id="more">More</button>
            </div>

            <div class="open-to-work">
                <p id="open-to-work">Open to work</p>
                <p>Software Engineer roles</p>
                <a href="">Show details</a>
            </div>
        </div>
    </section>

    <section class="analytics">
        <div class="analytics-wrapper">
            <p id="analytics">Analytics</p>
            <div class="private-to-you">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" data-supported-dps="16x16" fill="currentColor" class="mercado-match" width="16" height="16" focusable="false">
                    <path d="M8 3a8.59 8.59 0 00-8 5 8.54 8.54 0 008 5 8.55 8.55 0 008-5 8.55 8.55 0 00-8-5zm0 8a3 3 0 113-3 3 3 0 01-3 3zm2-3a2 2 0 11-2-2 2 2 0 012 2z"></path>
                </svg>
                <p id="private-to-you">Private to you</p>
            </div>

            <div class="analytics-container">
                <div class="profile-views">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                            <path d="M12 16v6H3v-6a3 3 0 013-3h3a3 3 0 013 3zm5.5-3A3.5 3.5 0 1014 9.5a3.5 3.5 0 003.5 3.5zm1 2h-2a2.5 2.5 0 00-2.5 2.5V22h7v-4.5a2.5 2.5 0 00-2.5-2.5zM7.5 2A4.5 4.5 0 1012 6.5 4.49 4.49 0 007.5 2z"></path>
                        </svg>
                    </div>
                    <div class="desc">
                        <h3>{{ (userService.$loggedUser | async)?.profileDetails?.profileViews }} profile views</h3>
                        <p>Discover who's viewed your profile.</p>
                    </div>
                </div>
    
                <div class="post-impressions">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                            <path d="M23 20v1H1v-1zM8 9H2v10h6zm7-6H9v16h6zm7 11h-6v5h6z"></path>
                        </svg>
                    </div>
                    
                    <div class="desc">
                        <h3>{{ (userService.$loggedUser | async)?.profileDetails?.postImpressions }} post impressions</h3>
                        <p>Check out who's engaging with your posts.</p>
                        <p id="past-7-days">Past 7 days</p>
                    </div>
                </div>
    
                <div class="search-appearances">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                            <path d="M21.41 18.59l-5.27-5.28A6.83 6.83 0 0017 10a7 7 0 10-7 7 6.83 6.83 0 003.31-.86l5.28 5.27a2 2 0 002.82-2.82zM5 10a5 5 0 115 5 5 5 0 01-5-5z"></path>
                        </svg>
                    </div>
                    
                    <div class="desc">
                        <h3>{{ (userService.$loggedUser | async)?.profileDetails?.searchAppearances }} search appearances</h3>
                        <p>See how often you appear in search results.</p>
                    </div>
                </div>
            </div>   
        </div>
        
        
        <div class="show-all-analytics">
            <p>Show all analytics</p>
            <mat-icon id="left-arrow">keyboard_backspace</mat-icon>
        </div>
    </section>

    <section class="resources">
        <div class="resources-container">
            <p id="resources">Resources</p>
            <div class="private-to-you">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" data-supported-dps="16x16" fill="currentColor" class="mercado-match" width="16" height="16" focusable="false">
                    <path d="M8 3a8.59 8.59 0 00-8 5 8.54 8.54 0 008 5 8.55 8.55 0 008-5 8.55 8.55 0 00-8-5zm0 8a3 3 0 113-3 3 3 0 01-3 3zm2-3a2 2 0 11-2-2 2 2 0 012 2z"></path>
                </svg>
                <p id="private-to-you">Private to you</p>
            </div>

            <div class="network-and-saved-items">
                <div class="my-network">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                            <path d="M12 16v6H3v-6a3 3 0 013-3h3a3 3 0 013 3zm5.5-3A3.5 3.5 0 1014 9.5a3.5 3.5 0 003.5 3.5zm1 2h-2a2.5 2.5 0 00-2.5 2.5V22h7v-4.5a2.5 2.5 0 00-2.5-2.5zM7.5 2A4.5 4.5 0 1012 6.5 4.49 4.49 0 007.5 2z"></path>
                        </svg>
                    </div>

                    <div class="desc">
                        <p id="my-network">My network</p>
                        <p>See and manage your connections and interests.</p>
                    </div>
                </div>
    
                <div class="saved-items">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                            <path d="M19 5a3 3 0 00-3-3H5v20l7-6.29L19 22z"></path>
                          </svg>
                    </div>

                    <div class="desc">
                        <p id="saved-items">Saved items</p>
                        <p>Keep track of your jobs, courses and articles.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="show-all-resources">
            <p>Show all 4 resources</p>
            <mat-icon id="left-arrow">keyboard_backspace</mat-icon>
        </div>
    </section>

    <section class="activity">
        <div class="activity-wrapper">
            <div class="top-part">
                <div class="activity-and-followers">
                    <p>Activity</p>
                    <a href="">12 followers</a>
                </div>
                <div class="button-and-create">
                    <button>Create a post</button>
                    <mat-icon>create</mat-icon>
                </div>
            </div>

            <div class="buttons">
                <button id="posts-btn">Posts</button>
                <button id="images-btn">Images</button>
            </div>

            <div class="post">
                <p id="tihomir-posted-this"><span>Tihomir Aščić</span> posted this • 2mo</p>
                <div class="img-and-desc">
                    <img src="../../../assets/images/posts/diploma.jpeg" alt="diploma" height="64px" width="64px">
                    <p class="desc">I just finished a .NET MVC bootcamp organised by <a href="">joinUP</a>. On this 3-month journey I learned a lot and met some great people. A big thank you to my lecturer <a href="">Robert Maksić</a>.</p>
                </div>
            </div>

            <div class="likes-and-comments">
                <div class="likes">
                    <img id="like" class="reactions-icon social-detail-social-counts__count-icon social-detail-social-counts__count-icon--0 reactions-icon__consumption--small data-test-reactions-icon-type-LIKE data-test-reactions-icon-theme-light" src="https://static.licdn.com/aero-v1/sc/h/8ekq8gho1ruaf8i7f86vd1ftt" alt="like" data-test-reactions-icon-type="LIKE" data-test-reactions-icon-theme="light">
                    <img id="heart" class="reactions-icon social-detail-social-counts__count-icon social-detail-social-counts__count-icon--1 reactions-icon__consumption--small reactions-icon--stacked data-test-reactions-icon-type-EMPATHY data-test-reactions-icon-theme-light" src="https://static.licdn.com/aero-v1/sc/h/cpho5fghnpme8epox8rdcds22" alt="love" data-test-reactions-icon-type="EMPATHY" data-test-reactions-icon-theme="light">
                    <p>4</p>
                </div>
                <div class="comments">
                    <p>1 comment</p>
                </div>
            </div>
        </div>

        <div class="show-all-posts">
            <p>Show all posts</p>
            <mat-icon id="left-arrow">keyboard_backspace</mat-icon>
        </div>
    </section>

    <section class="experience">
        <div class="title-and-edit">
            <p id="experience">Experience</p>
            <div class="add-and-edit">
                <div class="plus-wrapper" (click)="toggleWindow('experience')">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                        <path d="M21 13h-8v8h-2v-8H3v-2h8V3h2v8h8z"></path>
                    </svg>
                </div>
                <mat-icon (click)="edit('edit-experience')">create</mat-icon>
            </div>
        </div>

        <div class="joinup" *ngFor="let experience of (userService.$loggedUser | async)?.experience">
            <div class="joinup-image">
                <img [src]="experience.companyImageUrl" alt="joinup" height="48px" width="48px">
            </div>

            <div class="description">
                <p id="junior-software-developer">{{experience.position}}</p>
                <p id="joinup-full-time">{{experience.company.name}} · <span>{{ experience.employmentType }}</span></p>
                <p id="date-worked">{{ experience.startTime | date: 'MMM yyyy' }} - {{ experience.endTime | date: 'MMM yyyy' }} · {{ getMonthDifference(experience.startTime, experience.endTime) }}</p>
                <p id="place-worked">Osijek, Osijek-Baranja, Croatia · {{ experience.locationType }}</p>
                <br>
                <div class="skills-earned" *ngIf="getExperienceSkills(experience)">
                    <mat-icon>details</mat-icon>
                    <a id="skills-earned">{{ getExperienceSkills(experience) }}</a>
                </div>
            </div>
        </div>
    </section>

    <section class="education">
        <div class="top-part">
            <p id="education">Education</p>
            <div class="add-and-edit">
                <div class="plus-wrapper" (click)="toggleWindow('education')">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                        <path d="M21 13h-8v8h-2v-8H3v-2h8V3h2v8h8z"></path>
                    </svg>
                </div>
                <mat-icon (click)="edit('edit-education')">create</mat-icon>
            </div>
        </div>

        <div class="faculty" *ngFor="let education of (userService.$loggedUser | async)?.education">
            <div class="masters-degree">
                <img [src]="education?.schoolImageUrl" [alt]="education?.name" height="48px" width="48px">
                <div class="degree-desc">
                    <p id="faculty-name">{{education?.name}}</p>
                    <p id="degree-name">{{education?.degree}}, {{education?.fieldOfStudy}}</p>
                    <p id="time-studied">{{education?.startTime | date: 'MMM yyyy'}} - {{education?.endTime | date: 'MMM yyyy'}}</p>
                </div>
            </div>
        </div>
    </section>

    <section class="licenses-and-verifications">
        <div class="top-part">
            <p id="licenses-and-certifications">Licenses & certifications</p>
            <div class="add-and-edit">
                <div class="plus-wrapper" (click)="toggleWindow('license')">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                        <path d="M21 13h-8v8h-2v-8H3v-2h8V3h2v8h8z"></path>
                    </svg>
                </div>
                <mat-icon (click)="edit('edit-licenses')">create</mat-icon>
            </div>
        </div>

        <div class="main-part" *ngFor="let license of (userService.$loggedUser | async)?.licensesAndCertifications">
            <img [src]="license?.organizationImageUrl" alt="freecodecamp" height="48px" width="48px">
            <div class="desc">
                <p id="responsive-web-design">{{license.name}}</p>
                <p>{{license.issuingOrganization}}</p>
                <p id="issued-at">Issued {{getMonthFromDateObject(license?.issueDate)}} {{getYearFromDateObject(license?.issueDate)}}</p>
                <p id="credential-id">Credential ID {{license.credentialId}}</p>
                <button id="show-credential-btn">Show credential<mat-icon>launch</mat-icon></button>
            </div>
        </div>
    </section>

    <section class="skills">
        <div class="skills-container">
            <div class="top-part">
                <p id="skills">Skills</p>
                <div class="add-and-edit">
                    <div class="plus-wrapper" (click)="toggleWindow('skill')">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                            <path d="M21 13h-8v8h-2v-8H3v-2h8V3h2v8h8z"></path>
                        </svg>
                    </div>
                    <mat-icon (click)="edit('edit-skills')">create</mat-icon>
                </div>
            </div>

            <div class="main-part" *ngIf="displaySkills">
                <div class="software-development">
                    <p id="software-development">{{(userService.$loggedUser | async)?.skills[0]?.name}}</p>
                    <div class="img-and-desc">
                        <img [src]="(userService.$loggedUser | async)?.skills[0]?.skillsImageUrl" alt="joinup" height="24px" width="24px">
                        <p>{{(userService.$loggedUser | async)?.skills[0]?.description}}</p>
                    </div>
                </div>

                <div class="angular" *ngIf="(userService.$loggedUser | async)?.skills?.length > 1">
                    <p id="angular">{{(userService.$loggedUser | async)?.skills[1]?.name}}</p>
                    <div class="img-and-desc">
                        <img [src]="(userService.$loggedUser | async)?.skills[1]?.skillsImageUrl" alt="joinup" height="24px" width="24px">
                        <p>{{(userService.$loggedUser | async)?.skills[1]?.description}}</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="bottom-part" (click)="edit('edit-skills')" *ngIf="(userService.$loggedUser | async)?.skills?.length >= 3">
            <p>Show all {{ (userService.$loggedUser | async)?.skills?.length }} skills</p>
            <mat-icon id="left-arrow">keyboard_backspace</mat-icon>
        </div>
    </section>

    <section class="languages">
        <div class="languages-container">
            <div class="top-part">
                <p id="languages">Languages</p>
                <div class="add-and-edit">
                    <div class="plus-wrapper" (click)="toggleWindow('language')">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="currentColor" class="mercado-match" width="24" height="24" focusable="false">
                            <path d="M21 13h-8v8h-2v-8H3v-2h8V3h2v8h8z"></path>
                        </svg>
                    </div>
                    <mat-icon (click)="edit('edit-languages')">create</mat-icon>
                </div>
            </div>

            <div class="main-part">
                <div class="croatian">
                    <p id="croatian">{{ (userService.$loggedUser | async)?.languages[0].name }}</p>
                    <p class="native-or-bilingual">{{ (userService.$loggedUser | async)?.languages[0].proficiency }}</p>
                </div>

                <div class="english">
                    <p id="english">{{ (userService.$loggedUser | async)?.languages[1].name }}</p>
                    <p class="native-or-bilingual">{{ (userService.$loggedUser | async)?.languages[1].proficiency }}</p>
                </div>
            </div>
        </div>
        
        <div class="bottom-part" (click)="edit('edit-languages')">
            <p>Show all {{ (userService.$loggedUser | async)?.languages?.length }} languages</p>
            <mat-icon id="left-arrow">keyboard_backspace</mat-icon>
        </div>
    </section>

    <section class="interests">
        <div class="interests-wrapper">
            <div class="top-side">
                <p id="interests">Interests</p>
            </div>

            <div class="main-side">
                <div class="tabs">
                    <p id="companies">Companies</p>
                    <p id="schools">Schools</p>
                </div>
                <div class="companies">
                    <div class="ferit">
                        <img [src]="(userService.$loggedUser | async)?.pagesFollowing[0]?.imageUrl" alt="ferit" height="48px" width="48px"> 
                        <div class="info">
                            <p id="ferit-name">{{ (userService.$loggedUser | async)?.pagesFollowing[0]?.name }}</p>
                            <p class="no-of-followers">{{ (userService.$loggedUser | async).pagesFollowing[0].numberOfFollowers }} followers</p>
                            <button class="following"><mat-icon>check</mat-icon>Following</button>
                        </div>
                    </div>
                    <div class="cobe">
                        <img [src]="(userService.$loggedUser | async)?.pagesFollowing[1]?.imageUrl" alt="cobe" height="48px" width="48px">
                        <div class="info">
                            <p id="cobe-name">{{ (userService.$loggedUser | async)?.pagesFollowing[1]?.name }}</p>
                            <p class="no-of-followers">{{ (userService.$loggedUser | async)?.pagesFollowing[1]?.numberOfFollowers }} followers</p>
                            <button class="following"><mat-icon>check</mat-icon>Following</button>
                        </div>
                    </div>
                </div>
                <div class="schools">

                </div>
            </div>
        </div>
        
        <div class="bottom-side">
            <p>Show all companies</p>
            <mat-icon id="left-arrow">keyboard_backspace</mat-icon>
        </div>
    </section>
</main>
